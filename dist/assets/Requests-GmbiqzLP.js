import{a as r,r as m,j as s}from"./index-BSEMlVRB.js";import{a as d,A as i}from"./axiosInstance-COeckTb9.js";import{V as n}from"./index-DXwBFIQs.js";import{t as x}from"./truncateString-LQZzKm5b.js";const u=()=>{const{addRequests:e}=r();m.useEffect(()=>{(async()=>{try{const t=await d.get("/user/requests/received");t.data.success&&e(t.data.data)}catch(t){t instanceof i&&console.error(t.response.data.message)}})()},[e])},f=e=>{const{updateRequests:c}=r();return{handleReviewRequest:async o=>{const l=n.loading("Loading...");try{const a=await d.post(`/request/review/${o}/${e}`);a.data.success&&(c(e),n.success(a.data.message))}catch(a){a instanceof i&&n.error(a.response.data.message)}finally{n.dismiss(l)}}}},p=({request:e})=>{const{_id:c}=e,{photoUrl:t,name:o,about:l}=e.senderId,{handleReviewRequest:a}=f(c);return s.jsxs("div",{className:"flex flex-wrap items-center gap-5 bg-base-100 p-5 rounded-lg md:flex-nowrap",children:[s.jsxs("div",{className:"flex items-center gap-5 flex-1",children:[s.jsx("img",{src:t,className:"w-12 h-12 md:w-16 md:h-16 rounded-full",alt:"photo",loading:"lazy"}),s.jsxs("div",{className:"text-left space-y-1",children:[s.jsx("h3",{className:"font-semibold text-sm md:text-base",children:o}),s.jsx("p",{className:"text-xs md:text-sm",children:x(l,60)})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-3 w-full md:w-auto",children:[s.jsx("button",{onClick:()=>a("rejected"),className:"btn btn-error btn-sm sm:btn-md",children:"Reject"}),s.jsx("button",{onClick:()=>a("accepted"),className:"btn btn-primary btn-sm sm:btn-md",children:"Accept"})]})]})},b=()=>{u();const{requests:e}=r();return s.jsx("div",{className:"text-center my-8 max-w-3xl w-full mx-auto px-3",children:(e==null?void 0:e.length)===0?s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"sm:text-3xl text-2xl font-bold",children:"No Connection Requests Received!"}),s.jsx("img",{loading:"lazy",src:"/assets/empty-requests.svg",alt:"user-not-found",className:"block mx-auto w-96"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold",children:["Incoming Connection Requests (",e==null?void 0:e.length,")"]}),s.jsx("div",{className:"space-y-6 mt-8",children:e==null?void 0:e.map(c=>s.jsx(p,{request:c},c._id))})]})})};export{b as default};
