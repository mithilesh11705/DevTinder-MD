import{u as j,a as l,j as s,L as r,r as d,b as p,O as g}from"./index-BSEMlVRB.js";import{V as c,O as f}from"./index-DXwBFIQs.js";import{G as b}from"./iconBase-C3n1ulJp.js";import{a as x,A as m}from"./axiosInstance-COeckTb9.js";function L(e){return b({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"},child:[]}]})(e)}const v=()=>{const e=j(),{clearUser:a,clearFeed:n,clearRequests:i,clearConnections:t,clearMessages:h}=l();return{handleLogout:async()=>{const u=c.loading("Loading...");try{const o=await x.post("/auth/logout");o.data.success&&(a(),n(),i(),t(),h(),e("/login",{replace:!0}),c.success(o.data.message))}catch(o){o instanceof m&&c.error(o.message)}finally{c.dismiss(u)}}}},N=()=>{const{user:e}=l(),{handleLogout:a}=v(),n=async()=>{await a()};return s.jsx("header",{className:"min-h-16 px-3 sm:px-5 w-full bg-color-1 shadow-md shadow-primary/30",children:s.jsxs("div",{className:"navbar container mx-auto",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(r,{to:"/",className:"flex items-center gap-1 sm:gap-2 font-bold text-lg sm:text-xl",children:[s.jsx(L,{className:"w-5 h-5 sm:h-6 sm:w-6"}),s.jsx("span",{children:"DevTinder"})]})}),e?s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("p",{className:"sm:block hidden",children:["Welcome, ",s.jsx("b",{children:e==null?void 0:e.name})]}),s.jsxs("div",{className:"dropdown dropdown-end",children:[s.jsx("div",{tabIndex:0,role:"button",className:"btn btn-ghost btn-circle avatar",children:s.jsx("div",{className:"w-10 rounded-full",children:s.jsx("img",{alt:"Tailwind CSS Navbar component",src:e.photoUrl})})}),s.jsxs("ul",{tabIndex:0,className:"menu menu-base dropdown-content bg-base-100 rounded-box z-1 w-40 shadow p-0 py-2",children:[s.jsx("p",{className:"font-bold px-3",children:"My Account"}),s.jsx("div",{className:"divider m-0 mt-1"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("li",{children:s.jsx(r,{to:"/profile",children:"Profile"})}),s.jsx("li",{children:s.jsx(r,{to:"/requests",children:"Requests"})}),s.jsx("li",{children:s.jsx(r,{to:"/connections",children:"Connections"})}),s.jsx("li",{children:s.jsx("span",{onClick:n,children:"Logout"})})]})]})]})]}):s.jsx("button",{className:"btn btn-primary",children:s.jsx(r,{to:"/login",children:"Log In"})})]})})},w=()=>s.jsx("footer",{className:"footer sm:footer-horizontal footer-center bg-black/30 text-base-content p-6 mt-auto",children:s.jsx("aside",{children:s.jsx("p",{children:"Copyright Â© 2025 - All right reserved by Mithilesh Deore"})})}),y=()=>{const[e,a]=d.useState(!0),{addUser:n}=l();return d.useEffect(()=>{(async()=>{a(!0);try{const t=await x.get("/profile/view");t.data.success&&n(t.data.data)}catch(t){t instanceof m&&console.error(t.response.data.message)}finally{a(!1)}})()},[n]),{isLoading:e}},A=()=>{const{isLoading:e}=y();return e?s.jsx(p,{}):s.jsxs(s.Fragment,{children:[s.jsx(N,{}),s.jsx(g,{}),s.jsx(w,{}),s.jsx(f,{})]})};export{A as default};
