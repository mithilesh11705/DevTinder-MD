import{r as u,a as g,u as h,j as s,L as f}from"./index-BSEMlVRB.js";import{u as j,o as b}from"./index.esm-B03XS2Mx.js";import{I as N,a as w,L as y}from"./authSchema-D9i-O8QW.js";import{T as m,A as L}from"./index-DRGRvaSn.js";import{V as o}from"./index-DXwBFIQs.js";import{a as v,A as S}from"./axiosInstance-COeckTb9.js";import"./iconBase-C3n1ulJp.js";import"./index-3_hu1O3H.js";const k=t=>{const[n,e]=u.useState(!1),{addUser:c}=g(),d=h();return{isLoading:n,handleLogin:async r=>{e(!0);const l=o.loading("Loading...");try{const a=await v.post("/auth/login",r);a.data.success&&(o.success(a.data.message),c(a.data.data),d("/feed",{replace:!0}),t())}catch(a){a instanceof S&&o.error(a.response.data.message)}finally{e(!1),o.dismiss(l)}}}},R=()=>{const{register:t,handleSubmit:n,formState:{errors:e,isValid:c},reset:d}=j({resolver:b(y),mode:"onChange"}),[i,r]=u.useState(""),{isLoading:l,handleLogin:a}=k(d),x=async p=>{await a(p)};return s.jsxs("div",{className:"h-full flex flex-1 gap-10 items-center justify-center",children:[s.jsx("div",{className:"lg:block hidden",children:s.jsx("img",{src:"/assets/login.jpg",className:"block mx-auto w-[448px] rounded-xl",loading:"lazy",alt:"login-img"})}),s.jsxs("div",{className:"max-w-md w-full",children:[s.jsx("h2",{className:"card-title justify-center text-2xl mt-8",children:"Login to your Account"}),s.jsxs("form",{noValidate:!0,onSubmit:n(x),className:"card-body",children:[s.jsxs("div",{className:"space-y-5 my-4",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("label",{className:"floating-label",children:[s.jsx("span",{className:`${(e==null?void 0:e.email)&&"text-red-500"}`,children:"Email Address"}),s.jsx("input",{type:"email",...t("email"),placeholder:"Email Address",className:`input w-full h-13 focus:outline-0 focus-within:outline-0 ${(e==null?void 0:e.email)&&"border-red-500"}`})]}),(e==null?void 0:e.email)&&s.jsx(m,{message:e.email.message})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("label",{className:"floating-label",children:[s.jsx("span",{className:`${(e==null?void 0:e.password)&&"text-red-500"}`,children:"Password"}),s.jsx("input",{type:i?"text":"password",...t("password"),placeholder:"Password",className:`input w-full h-13 focus:outline-0 focus-within:outline-0 ${(e==null?void 0:e.password)&&"border-red-500"}`})]}),s.jsx("span",{onClick:()=>r(!i),className:"absolute top-1/2 -translate-y-1/2 right-10 text-base cursor-pointer text-primary",children:i?s.jsx(N,{}):s.jsx(w,{})}),(e==null?void 0:e.password)&&s.jsx(m,{message:e.password.message})]})]}),s.jsxs("label",{className:"fieldset-label mb-6",children:[s.jsx("input",{type:"checkbox",className:"checkbox rounded-sm w-5 h-5",defaultChecked:!0}),"Remember me"]}),s.jsxs("div",{className:"flex items-center flex-col gap-3",children:[s.jsxs("p",{className:"m-auto cursor-pointer font-light",children:["Not Registered Yet ?"," ",s.jsx(f,{to:"/signup",className:"font-semibold",children:"Sign Up"})]}),s.jsx("button",{type:"submit",disabled:!c||l,className:" btn btn-primary w-full h-11",children:l?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(L,{className:"animate animate-spin text-lg"}),"Processing..."]}):"Login"})]})]})]})]})};export{R as default};
