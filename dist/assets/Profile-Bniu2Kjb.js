import{r as j,a as b,j as e,b as g}from"./index-BSEMlVRB.js";import{c as N,b as i,d as v,a as y,u as w,o as k}from"./index.esm-B03XS2Mx.js";import{v as E,T as c,A as P}from"./index-DRGRvaSn.js";import{V as d}from"./index-DXwBFIQs.js";import{a as U,A as S}from"./axiosInstance-COeckTb9.js";import{t as A}from"./truncateString-LQZzKm5b.js";import"./iconBase-C3n1ulJp.js";import"./index-3_hu1O3H.js";const I=N({name:i().min(6,"Name must be at least 6 characters").max(50,"Name must not exceed 50 characters").trim(),email:i().trim().email("Please provide a valid email address").test("validate-email","Please provide a valid email address",a=>E.isEmail(a)),gender:i().trim().oneOf(["male","female"]),photoUrl:i().trim().url("Please provide a valid URL").required("Please provide the photo url"),age:y().transform(a=>isNaN(a)?void 0:a).nullable().typeError("Please enter a valid age").positive("Age must be positive").integer("Age must be a whole number").min(18,"You must be at least 18 years old"),about:i().trim().max(200,"About section should not exceed 200 characters").min(10,"About section must be at least 10 characters"),skills:v(i().trim()).max(5,"You can add up to 5 skills only").test("skill-length","Each skill must be between 2 and 20 characters",a=>a?a.every(s=>s.length>=2&&s.length<=20):!0).optional(),skillsInput:i().trim()}),$=()=>{const[a,s]=j.useState(!1),{addUser:n}=b();return{isLoading:a,handleEditProfile:async l=>{s(!0);const o=d.loading("Loading..."),{name:h,email:m,skillsInput:u,...x}=l;try{const t=await U.patch("/profile/edit",x);t.data.success&&(n(t.data.data),d.success(t.data.message))}catch(t){t instanceof S&&d.error(t.response.data.message)}finally{s(!1),d.dismiss(o)}}}},L=({user:a})=>{const{register:s,handleSubmit:n,setValue:r,formState:{errors:l,isValid:o}}=w({resolver:k(I),mode:"onChange",defaultValues:{name:a==null?void 0:a.name,email:a==null?void 0:a.email,gender:a==null?void 0:a.gender,age:a==null?void 0:a.age,about:a==null?void 0:a.about,photoUrl:a==null?void 0:a.photoUrl,skills:(a==null?void 0:a.skills)||[],skillsInput:a!=null&&a.skills?a==null?void 0:a.skills.join(", "):""}}),h=t=>{const f=t.target.value.split(",").map(p=>p.trim()).filter(p=>p!="");r("skills",f,{shouldValidate:!0})},{isLoading:m,handleEditProfile:u}=$(),x=async t=>{await u(t)};return e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body px-4 sm:px-6",children:[e.jsx("h2",{className:"card-title text-xl sm:text-2xl",children:"Edit Profile"}),e.jsx("p",{className:"text-base-content/70 text-sm",children:"Update your DevTinder profile information"}),e.jsxs("form",{noValidate:!0,onSubmit:n(x),className:"mt-6 space-y-6 text-sm",children:[e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Name"})}),e.jsx("input",{type:"text",...s("name"),placeholder:"Enter your name",disabled:!0,readOnly:!0,className:"input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0"})]}),e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Email"})}),e.jsx("input",{type:"email",...s("email"),placeholder:"Enter your email",className:"input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col items-center sm:flex-row sm:items-start gap-4",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-24 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:e.jsx("img",{src:a.photoUrl||"https://via.placeholder.com/150",alt:"Profile",loading:"lazy"})})}),e.jsxs("div",{className:"form-control w-full space-y-1 relative",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Profile Photo URL"})}),e.jsx("input",{type:"text",...s("photoUrl"),placeholder:"https://example.com/photo.jpg",className:`input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0 ${(l==null?void 0:l.photoUrl)&&"border-red-500"}`}),(l==null?void 0:l.photoUrl)&&e.jsx(c,{message:l.photoUrl.message}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt",children:"Provide a URL to your profile picture"})})]})]}),e.jsxs("div",{className:"form-control space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Gender"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"radio",...s("gender"),className:"radio radio-primary",value:"male"}),e.jsx("span",{className:"label-text",children:"Male"})]}),e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"radio",...s("gender"),className:"radio radio-primary",value:"female"}),e.jsx("span",{className:"label-text",children:"Female"})]})]})]}),e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Age"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:18,...s("age"),placeholder:"Enter your age",className:`input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0 ${(l==null?void 0:l.age)&&"border-red-500"}`}),(l==null?void 0:l.age)&&e.jsx(c,{message:l.age.message})]})]}),e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Skills (Enter up to 5 skills, separated by commas)"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",...s("skillsInput"),onChange:h,placeholder:"React, Node.js, MongoDB, etc.",className:`input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0 ${(l==null?void 0:l.skills)&&"border-red-500"}`}),(l==null?void 0:l.skills)&&e.jsx(c,{message:l.skills.message})]}),e.jsx("input",{type:"hidden",...s("skills")})]}),e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"About Me"})}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{...s("about"),placeholder:"Tell other developers about yourself...",className:`textarea textarea-bordered h-32 w-full resize-none focus:outline-0 focus-within:outline-0 ${(l==null?void 0:l.about)&&"border-red-500"}`}),(l==null?void 0:l.about)&&e.jsx(c,{message:l.about.message})]})]}),e.jsx("div",{className:"card-actions justify-end mt-6",children:e.jsx("button",{type:"submit",disabled:!o||m,className:"btn btn-primary min-w-[120px]",children:m?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"animate animate-spin text-lg"}),"Saving..."]}):"Save Changes"})})]})]})})},V=({user:a})=>{const{name:s,about:n,age:r,gender:l,photoUrl:o}=a;return e.jsx("div",{draggable:!1,className:"max-w-sm border border-gray-200 rounded-lg overflow-hidden pointer-events-none lg:block hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("img",{src:o,draggable:"false",loading:"lazy",className:"h-[60%] w-full object-cover",alt:"user"}),e.jsxs("div",{className:"p-4 bg-base-200 flex flex-col justify-between h-[40%]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:s}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 sm:mt-1 mb-2",children:`${r}, ${l}`}),e.jsx("p",{className:"text-gray-300 text-sm sm:text-base",children:A(n,50)||"No description available"})]}),e.jsxs("div",{className:"card-actions hidden sm:flex justify-between space-x-2 mt-4",children:[e.jsx("button",{className:"btn btn-error btn-sm sm:btn-md flex-1",children:"Ignore"}),e.jsx("button",{className:"btn btn-primary btn-sm sm:btn-md flex-1",children:"Interested"})]})]})]})})},Y=()=>{const{user:a}=b();return a?e.jsxs("div",{className:"flex flex-1 justify-center gap-10 items-center relative my-10 px-3",children:[e.jsx(L,{user:a}),e.jsx(V,{user:a})]}):e.jsx(g,{})};export{Y as default};
